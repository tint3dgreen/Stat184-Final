---
title: "Final Project Report"
author: "Colin Arscott"
date: "12/13/2020"
output: html_notebook
---


```{r, echo=FALSE}
library(tidyverse)
CostOfLiving <- read.csv("cost-of-living.csv")
PayByDegree <- read.csv("degrees-that-pay-back.csv")
```
## Research Question
The question I have decided to tackle is: Which city is the best to live in for a recent college graduate?
To answer this, I found two datasets. One dataset has cost of living data for cities all around the world. The other dataset has salaries for different college degrees at certain points in their careers.
<br> This is an important question to answer as my peers and I are all currently in school, it is important to look for post graduation employment in a location where we can have a high quality of life.

## Data Wrangling

The data did not come in a format that was usable for my purposes right off the bat. I needed to do significant data wrangling in order to make the data usable. 

### CostOfLiving
<br> The dataset called CostOfLiving has the following structure before data wrangling:
```{r}
CostOfLiving
```
This has a few problems that need to be sorted out. Firstly, there are way too many cities included here. I would like to narrow the scope to include only cities in the United States as Penn State students are most likely going to end up working and living somewhere in the United States after college. 
<br><br> The first step will be to filter out all columns that are not located in America.
```{r}
WrangledCost <- CostOfLiving %>% select(X,contains("United.States")) %>% rename("TypeOfGood" = X)
WrangledCost
```
During this step, I also renamed the first column from a generic "X" to a more descriptive "Type of Good". Now after this initial step, the data is already way easier to look at and compare between cities. The next step is to remove all the types of goods that I wont be focusing on. This dataset is very in depth and contains many goods, butr I will only be keeping the essentials.
```{r}
WrangledCost <- WrangledCost %>% filter(TypeOfGood == "Meal, Inexpensive Restaurant"|
                                        TypeOfGood == "Meal for 2 People, Mid-range Restaurant, Three-course"|
                                        TypeOfGood == "Milk (regular), (1 liter)"|
                                        TypeOfGood == "Volkswagen Golf"|
                                        TypeOfGood == "Apartment (1 bedroom) in City Centre"|
                                        TypeOfGood == "Apartment (1 bedroom) Outside of Centre"|
                                        TypeOfGood == "Utilities"|
                                        TypeOfGood == "Internet"|
                                        TypeOfGood == "Gasoline (1 liter)")
WrangledCost
```
Now that the table is limited to a few specific goods, it is easier to visualize the key differences between the cities. The next thing I want to do is to add a new column that will contain the average cost of that good across all cities.
```{r}
WrangledCost <- WrangledCost %>% mutate(Average = round(rowMeans(WrangledCost[,-1]),digits = 2))
WrangledCost
```
The final piece of data wrangling I would like to do to this dataset is to replace all the periods in the column titles with using regular expressions. I will be using my custom function ReplaceWithSpace to accomplish this. After this step is completed I will consider this dataset glyph ready.
```{r}
#This function takes a dataframe(DataFrame) and a symbol(s) as parameters. It returns a copy of the DataFrame with each instance of s in the column names replaced with a space. Note, Escape characters are required if s uses special characters
ReplaceWithSpace <- function(DataFrame,s){
  tempFrame <- DataFrame
  oldNames <- colnames(tempFrame)
  fixedNames <- gsub(pattern = s,replacement = " ",oldNames)
  colnames(tempFrame) <- fixedNames
  return(tempFrame)
}
WrangledCost <- ReplaceWithSpace(WrangledCost,"\\.")
WrangledCost
```

### PayByDegree
This dataset does not need as much wrangling done to it as CostOfLiving. That being said, There are a few dollar signs and commas that need to be removed before data wrangling can begin. I also would like to fix the titles using my ReplaceWithSpace function.
```{r}
#First replace all the periods with spaces
WrangledPay <- ReplaceWithSpace(PayByDegree,"\\.")

#Then remove the currency symbol from the data
WrangledPay <- WrangledPay %>%
                mutate(`Starting Median Salary` = gsub(pattern = '[$,]', replacement = '', `Starting Median Salary`),
                       `Mid Career Median Salary` = gsub(pattern = '[$,]', replacement = '', `Mid Career Median Salary`),
                       `Mid Career 10th Percentile Salary` = gsub(pattern = '[$,]', replacement = '', `Mid Career 10th Percentile Salary`),
                       `Mid Career 25th Percentile Salary` = gsub(pattern = '[$,]', replacement = '', `Mid Career 25th Percentile Salary`),
                       `Mid Career 75th Percentile Salary` = gsub(pattern = '[$,]', replacement = '', `Mid Career 75th Percentile Salary`),
                       `Mid Career 90th Percentile Salary` = gsub(pattern = '[$,]', replacement = '', `Mid Career 90th Percentile Salary`))
WrangledPay
```
After removing all the unnecessary symbols, this dataset is looks like its in pretty good shape. The last bit of data wrangling I need to do is convert all the money values from strings to doubles. I need to do this because I cant do math operations on strings
```{r}
WrangledPay$`Starting Median Salary` <- as.double(WrangledPay$`Starting Median Salary`)
WrangledPay$`Mid Career Median Salary` <- as.double(WrangledPay$`Mid Career Median Salary`)
WrangledPay$`Mid Career 10th Percentile Salary` <- as.double(WrangledPay$`Mid Career 10th Percentile Salary`)
WrangledPay$`Mid Career 25th Percentile Salary` <- as.double(WrangledPay$`Mid Career 25th Percentile Salary`)
WrangledPay$`Mid Career 75th Percentile Salary` <- as.double(WrangledPay$`Mid Career 75th Percentile Salary`)
WrangledPay$`Mid Career 90th Percentile Salary` <- as.double(WrangledPay$`Mid Career 90th Percentile Salary`)
WrangledPay
```
Now all the values that should be doubles have been converted to doubles. The final bit of data wrangling I want to do on this data is calculate the Mean starting salary over all majors.
```{r}
count = 0
total = 0
#loop over each value in Starting Median Salary
for (i in WrangledPay$`Starting Median Salary`){
  total <- total + i #add this value to the total
  count <- count + 1 #keep track of each item
}
allDegreeMean <- total/count #calculate mean
print(allDegreeMean)
```
That is all the data wrangling that needed to be done, now on to Data Visualization.


## Data Visualization
